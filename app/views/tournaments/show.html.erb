

<p style="color: green"><%= notice %></p>

<div class="container mt-5">
<div style="display: flex; align-items: center;">

  <%= image_tag("tournament.png", alt: "tournament", style: "width: 60px; height: 60px; object-fit: cover;") %>

  <h2 style="margin-left: 10px;"><%= @tournament.name %></h2>

</div>
  


  <div class="d-flex justify-content-between align-items-center mb-3">
    <div class="input-group">

      <input type="text" class="form-control" placeholder="Search..." aria-label="Search" aria-describedby="basic-addon2">
      <div class="input-group-append">
        <button class="btn btn-outline-secondary" type="button">Search</button>
      </div>
      
    </div>
    <% if can? :update, @tournament %>
    <%= link_to "New Event", new_tournament_event_path(@tournament,@event), class: "btn btn-success" %><br/>
    <% end %>
  </div>



  <ul class="nav nav-tabs" id="tournamentTabs" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" id="overview-tab" data-toggle="tab" href="#overview" role="tab" aria-controls="overview" aria-selected="true">Overview</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="teams-tab" data-toggle="tab" href="#teams" role="tab" aria-controls="teams" aria-selected="false">Participating Teams</a>
    </li>
  </ul>
  

  <div class="tab-content mt-3">

  <div class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview-tab">
  <div class="card">
    <div class="card-body">
      <%= render @tournament %>
      <div class="mt-3">
        <% if can? :update, @tournament %>
        <%= link_to edit_tournament_path(@tournament) do %>
          <%= image_tag("edit.png", alt: "edit", style: "width: 20px; height: 20px; object-fit: cover;") %> |
          <% end %>
         
        <% end %>
        <% if can? :update,@tournament %>
        <%= link_to new_tournament_team_path(@tournament) do %>
          <%= image_tag("addteam.png", alt: "edit", style: "width: 20px; height: 20px; object-fit: cover;") %> |
          <% end %>
        <% end %>

        <%= link_to tournaments_path(@tournament) do %>
          <%= image_tag("back.png", alt: "edit", style: "width: 20px; height: 20px; object-fit: cover;") %> |
          <% end %>
        <% if can? :destroy, @tournament %>
        <%= link_to (@tournament) do %>
          <%= image_tag("empty.png", alt: "edit", style: "width: 20px; height: 20px; object-fit: cover;") %>
          <% end %>
          <%#= button_to "Destroy this Tournament", @tournament, method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-danger" %>
        <% end %>
      </div>
    </div>
  </div>

  <table class="table">
  <thead>
    <tr>
      <th>Events</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @tournament.events.each do |event| %>
      <tr>
        <td>
          <p><%= event.game_type %></p>
        </td>
        <td>
          <%#= link_to "Show", tournament_event_path(@tournament, event), class: "btn btn-success" %>
          <%= link_to tournament_event_path(@tournament, event) do %>
            <%= image_tag("show.png", alt: "show", style: "width: 20px; height: 20px; object-fit: cover;") %>
            <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>

<div class="tab-pane fade" id="teams" role="tabpanel" aria-labelledby="teams-tab">
  <div class="card">
    <div class="card-body">
      <h3>Participating Teams</h3>
      <table class="table">
        <thead>
          <tr>
            <th>Teams</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @tournament.teams.each do |team| %>
            <tr>
              <td>
                <p><%= team.name %></p>
              </td>
              <td>
                <%#= link_to "Show", tournament_team_path(@tournament, team), class: "btn btn-success" %>
                <%= link_to tournament_team_path(@tournament, team) do %>
                  <%= image_tag("show.png", alt: "show", style: "width: 20px; height: 20px; object-fit: cover;") %>
                  <% end %>
              </td>
            </tr>
          <% end %>

          <% @tournament.opponent_teams.each do |opponent_team| %>
            <tr>
              <td>
                <p><%= opponent_team.name %></p>
              </td>
              <td>
                <%#= link_to "Show", tournament_team_path(@tournament, team), class: "btn btn-success" %>
                <%= link_to tournament_opponent_team_path(@tournament, opponent_team) do %>
                  <%= image_tag("show.png", alt: "show", style: "width: 20px; height: 20px; object-fit: cover;") %>
                  <% end %>
              </td>
            </tr>
          <% end %>

        </tbody>
      </table>
    </div>
  </div>
</div>


<script>
  $(document).ready(function() {
    $('#tournamentTabs a').on('click', function (e) {
      e.preventDefault()
      $(this).tab('show')
    })
  });
</script>




